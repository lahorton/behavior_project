{% extends 'base.html' %}
{% block content %}

<h2>Welcome, {{ user.user_name }}!</h2>

<p>User ID: {{ user.user_id }} </p>
 
<!-- Button trigger addStudent modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addStudent">
Add a student
</button>

<!-- Button trigger editUserProfile -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editUserPassword">Reset User Password
</button>

<br>
<br>

<ul id="student_info" >
{% for student in user.students %}
    <li id="{{ student.student_id }}"><a href="/student_history/{{ student.student_id }}" data-toggle= "tooltip" title= "Phone: {{ student.phone_number }} Birthdate: {{ student.birthdate.strftime('%b %d, %Y') }} Student ID: {{ student.user_id }}" >
        {{ student.fname }} {{student.lname }}</a>
        <p><img src="{{ student.photo }}" alt="No Photo Available" style="width:100px;height:100px;"></p>
    </li>
{% endfor %}
</ul>

<div class="tooltip bs-tooltip-top" role="tooltip">
  <div class="arrow"></div>
  <div class="tooltip-inner">
    Some tooltip text!
  </div>
</div>

<!-- addStudent Form Modal -->
<div class="modal fade" id="addStudent" tabindex="-1" role="dialog" aria-labelledby="addStudent" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h5 class="modal-title" id="exampleModalLabel">Add Student</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <form action = "/add_student" method="POST">
            Enter student's first name:
            <input type="text" name="fname"><br>
            Enter student's last name:
            <input type="text" name="lname"><br>
            Enter student's birthdate:
            <input type="date" name="birthdate"><br>
            Enter phone number:
            <input type="text" name="phone"><br>
            Add a photo (link to jpg):
            <input type="text" name="photo"><br>
      </div>
      <div class="modal-footer">
        <input type="Submit">
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Edit user password Modal -->
<div class="modal fade" id="editUserPassword" tabindex="-1" role="dialog" aria-labelledby="editUserPassword" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h5 class="modal-title" id="exampleModalLabel">Reset User Password</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <form action = "/edit_user/{{ user.user_id }}" method="POST">
        <h2>{{ user.user_name }}</h2>
        <div>
        Please enter your current password:
        <input type="text" name="current_password"><br>
        </div>
        <div>
        New Password:
        <input type="text" name="new_password"><br>
        </div>
      </div>
      <div class="modal-footer">
        <input type="Submit">
        </form>
      </div>
    </div>
  </div>
</div>

<script>

$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})

</script>

{% endblock %}